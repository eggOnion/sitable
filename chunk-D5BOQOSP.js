import"./chunk-AEEGLXRM.js";import{k as w,q as o}from"./chunk-HOOEAAVP.js";import{e as F}from"./chunk-SJKNSU5S.js";import{h as L,i as D,q as O}from"./chunk-V25QKEGY.js";import{Ca as s,Ma as l,Na as r,R as C,Ra as b,S as n,W as I,X as v,Xa as p,Za as m,_a as c,ab as y,ba as _,ca as x,eb as k,fb as u,jb as h,kb as A,lb as z}from"./chunk-S3RXBBJ2.js";var S=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=r({type:t});static \u0275inj=n({imports:[o,o]})}return t})();var f=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=r({type:t});static \u0275inj=n({imports:[o,o]})}return t})();var B=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=r({type:t});static \u0275inj=n({imports:[o]})}return t})();var P=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=r({type:t});static \u0275inj=n({imports:[w,o,f,B,S]})}return t})();var M=(()=>{class t{static \u0275fac=function(a){return new(a||t)};static \u0275mod=r({type:t});static \u0275inj=n({imports:[o,f,o]})}return t})();var g=class t{constructor(i){this.http=i}url="https://my-sitable.et.r.appspot.com/Oauth/whitelisted-emails";getWhitelistedEmails(){return this.http.get(`${this.url}`)}login(i){return this.http.post(`${this.url}/login`,{email:i})}static \u0275fac=function(e){return new(e||t)(I(O))};static \u0275prov=C({token:t,factory:t.\u0275fac,providedIn:"root"})};function G(t,i){if(t&1){let e=y();m(0,"li")(1,"a",3),k("click",function(){let R=_(e).$implicit,N=u();return x(N.onLogin(R.email))}),h(2),c()()}if(t&2){let e=i.$implicit;s(2),z(" ",e.email," ")}}function W(t,i){if(t&1&&(m(0,"div",4)(1,"p"),h(2),c()()),t&2){let e=u();s(2),A(e.errorMessage)}}var j=class t{oAuthService=v(g);router=v(F);whitelistedEmails=[];errorMessage=null;ngOnInit(){this.oAuthService.getWhitelistedEmails().subscribe({next:i=>this.whitelistedEmails=i,error:()=>this.errorMessage="Error fetching emails"})}onLogin(i){this.oAuthService.login(i).subscribe({next:e=>{sessionStorage.setItem("userEmail",i),sessionStorage.setItem("authToken",e.token),sessionStorage.setItem("userFirstName",e.firstName),sessionStorage.setItem("userLastName",e.lastName),this.router.navigate(["/seat-booking"]).then(()=>{window.location.reload()})},error:e=>{this.errorMessage=e.error}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=l({type:t,selectors:[["app-login"]],decls:6,vars:2,consts:[[1,"login-container"],[4,"ngFor","ngForOf"],["class","error",4,"ngIf"],["href","javascript:void(0);",3,"click"],[1,"error"]],template:function(e,a){e&1&&(m(0,"div",0)(1,"h2"),h(2,"Choose an account to Login"),c(),m(3,"ul"),b(4,G,3,1,"li",1),c(),b(5,W,3,1,"div",2),c()),e&2&&(s(4),p("ngForOf",a.whitelistedEmails),s(),p("ngIf",a.errorMessage))},dependencies:[P,M,D,L],styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:70px auto auto;padding:30px;border:1px solid #ccc;border-radius:12px;background-color:#f9f9f9;box-shadow:0 5px 10px #000001cc}h2[_ngcontent-%COMP%]{text-align:center;color:#333}.mat-list[_ngcontent-%COMP%]{width:100%;margin-top:20px}.email-item[_ngcontent-%COMP%]{cursor:pointer;padding:10px;border-bottom:1px solid #ddd}.email-item[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.error-message[_ngcontent-%COMP%]{color:red;margin-top:10px;text-align:center}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}li[_ngcontent-%COMP%]{border:1px solid #ccc;margin-bottom:10px;border-radius:5px;overflow:hidden}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:10px 15px;text-decoration:none;color:#333;transition:background-color .3s ease}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#aab7b8}"]})};export{j as LoginComponent};
