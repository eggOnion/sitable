import{a as P}from"./chunk-SWZ6JFUD.js";import{a as N}from"./chunk-6ASSMD6I.js";import{c as _}from"./chunk-JG2XC3CM.js";import{a as C,b as x,c as y,d as B,e as w,f as D,g as I,i as M,j as F,n as A,o as O}from"./chunk-AEEGLXRM.js";import"./chunk-HOOEAAVP.js";import{e as h,f as S}from"./chunk-SJKNSU5S.js";import{k as b,p as k,q as v}from"./chunk-V25QKEGY.js";import{$a as c,Ca as s,Ma as g,R as m,X as n,Xa as d,Za as r,_a as a,eb as u,jb as l,nb as f}from"./chunk-S3RXBBJ2.js";var p=class i{http=n(v);dialog=n(_);apiUrl="https://my-sitable.et.r.appspot.com/seats";showAlert(e){this.dialog.open(P,{data:{message:e}})}confirmAction(e){return this.dialog.open(N,{data:{message:e}}).afterClosed()}deleteBooking(e,o){let t=new k({Authorization:`Bearer ${o}`,"Content-Type":"application/json"});return this.http.delete(`${this.apiUrl}/deleteBooking/${e}`,{headers:t})}static \u0275fac=function(o){return new(o||i)};static \u0275prov=m({token:i,factory:i.\u0275fac,providedIn:"root"})};var R=()=>["/view-seat-booking"],j=class i{deleteBookingService=n(p);router=n(h);ngOnInit(){let e=sessionStorage.getItem("authToken"),o=sessionStorage.getItem("userEmail");if(!e||!o){this.router.navigate(["/"]);return}}deleteForm=new w({bookingId:new D("",x.required)});confirmDelete(){this.deleteBookingService.confirmAction("Are you sure you want to delete this seat?").subscribe(e=>{e&&this.deleteBooking()})}deleteBooking(){let e=sessionStorage.getItem("authToken");if(!e){this.deleteBookingService.showAlert("Please log in first");return}let o=this.deleteForm.value.bookingId?.trim();if(!o){this.deleteBookingService.showAlert("Please enter a valid Booking ID.");return}this.deleteBookingService.deleteBooking(o,e).subscribe({next:()=>{this.deleteBookingService.showAlert(`Booking ID: ${o} deleted successfully!`),this.router.navigate(["/view-seat-booking"])},error:t=>this.deleteBookingService.showAlert("Booking deletion failed: "+t.error?.error)})}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=g({type:i,selectors:[["app-delete-seat-booking"]],decls:13,vars:4,consts:[[1,"container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","bookingId"],["type","text","id","bookingId","formControlName","bookingId","required","",1,"form-control"],[1,"mod-btn"],["type","submit",1,"del-btn",3,"disabled"],["type","button",1,"view-my-booking",3,"routerLink"]],template:function(o,t){o&1&&(r(0,"div",0)(1,"h2"),l(2,"Delete Seat Booking"),a(),r(3,"form",1),u("ngSubmit",function(){return t.confirmDelete()}),r(4,"div",2)(5,"label",3),l(6,"Booking ID:"),a(),c(7,"input",4),a(),r(8,"div",5)(9,"button",6),l(10," Submit "),a(),r(11,"button",7),l(12," My Booking "),a()()()()),o&2&&(s(3),d("formGroup",t.deleteForm),s(6),d("disabled",t.deleteForm.invalid),s(2),d("routerLink",f(3,R)))},dependencies:[b,O,I,C,y,B,A,M,F,S],styles:[".container[_ngcontent-%COMP%]{max-width:500px;margin:20px auto 0;padding:20px}.form-group[_ngcontent-%COMP%]{display:flex;gap:15px;margin-bottom:15px}.mod-btn[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;margin-top:auto;padding:20px 0;gap:25px}.del-btn[_ngcontent-%COMP%]{background-color:#229954;color:#fff;padding:10px 20px;border:none;border-radius:5px;cursor:pointer;transition:.3s ease}.del-btn[_ngcontent-%COMP%]:hover{background-color:#27ae60}.view-my-booking[_ngcontent-%COMP%]{padding:10px 20px;background-color:#dc7633;font-weight:700;color:#fff;border-radius:25px;border:2px solid #dc7633;transition:all .3s ease-in-out}.view-my-booking[_ngcontent-%COMP%]:hover{background-color:transparent;font-weight:700;border-radius:18px;border:2px solid #dc7633;color:#000}"]})};export{j as DeleteSeatBookingComponent};
